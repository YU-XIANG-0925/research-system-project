# 功能規格：Android 機器人控制 APP

**功能分支**：`002-andriod-app-robot`  
**建立日期**：2025-09-16
**狀態**：草稿  
**輸入**：使用者描述：「本專案需要建立一個基於andriod的機器人操作系統APP，並將專案建立在@robot 資料夾，這個APP會需要有以下功能，1.主頁面要可以選擇欲使用的功能 2.連線頁面要能夠讓機器人與MQTT broker進行連線並訂閱自己輸入的topic，並且在切換到其他功能的時候也要保持與MQTT broker的連線 3.播放機器人動作功能頁面，在這個頁面，最左側必須列出官方預先輸入給機器人的動作列表，並且保持每秒一次的頻率將機器人當前所有馬達的角度publish到MQTT 4.手動調整機器人動作功能，在進入這個功能的時候，要先初始化歸零機器人的馬達角度，除了要在螢幕上同樣保持每秒一次的頻率即時更新機器人每個馬達的角度，還要有一個按鈕Record，當按下Record就會開始將所有的馬達的角度publish到MQTT，另一個按鈕Return，當按下Return，機器人所有的馬達角度歸零」

## 執行流程 (主要)
```
1. 從輸入解析使用者描述
   → 如果為空：錯誤「未提供功能描述」
2. 從描述中提取關鍵概念
   → 識別：參與者、動作、資料、限制
3. 對於每個不清楚的方面：
   → 標記為 [需要澄清：具體問題]
4. 填寫使用者場景與測試部分
   → 如果沒有清晰的使用者流程：錯誤「無法確定使用者場景」
5. 產生功能需求
   → 每個需求都必須是可測試的
   → 標記模糊的需求
6. 識別關鍵實體 (如果涉及資料)
7. 執行審查清單
   → 如果有任何 [需要澄清]：警告「規格存在不確定性」
   → 如果發現實作細節：錯誤「移除技術細節」
8. 回傳：成功 (規格已準備好進行規劃)
```

---

## ⚡ 快速指引
- ✅ 專注於使用者需要什麼以及為什麼
- ❌ 避免如何實作 (沒有技術堆疊、API、程式碼結構)
- 👥 為業務利害關係人而非開發人員編寫

### 章節要求
- **強制性章節**：每個功能都必須完成
- **選擇性章節**：僅在與功能相關時才包含
- 當某個章節不適用時，請完全移除它 (不要保留為「不適用」)

### 對於 AI 生成
從使用者提示建立此規格時：
1. **標記所有模糊之處**：對於您需要做出的任何假設，請使用 [需要澄清：具體問題]
2. **不要猜測**：如果提示未指定某些內容 (例如，「登入系統」但未指定驗證方法)，請標記它
3. **像測試人員一樣思考**：每個模糊的需求都應該無法通過「可測試且無歧義」的檢查項目
4. **常見的未詳細說明區域**：
   - 使用者類型和權限
   - 資料保留/刪除政策
   - 效能目標和規模
   - 錯誤處理行為
   - 整合需求
   - 安全/合規需求

---

## 使用者場景與測試 *(強制性)*

### 主要使用者故事
作為一名機器人操作員，我想要一個 Android 應用程式來控制機器人。該應用程式應位於 `@robot` 目錄中。我需要一個主頁面來從各種功能中進行選擇。一個關鍵功能是連線頁面，用於使用自訂主題將機器人連接到 MQTT 代理，確保即使在功能之間切換時此連線也保持活動狀態。該應用程式必須有一個「播放機器人動作」頁面，在最左側列出官方預定義的動作。此頁面還必須以每秒一次的速率將機器人當前的馬達角度發佈到 MQTT。此外，應該有一個「手動機器人調整」功能。進入此模式後，機器人的馬達角度必須初始化為零。螢幕必須每秒一次即時更新每個馬達的角度。此頁面需要一個「記錄」按鈕，按下該按鈕後，開始將所有馬達角度發佈到 MQTT。還必須有一個「返回」按鈕，用於將所有機器人的馬達角度重設為零。

### 驗收場景
1. **假設** 應用程式已啟動，**當** 使用者導覽至連線頁面時，**那麼** 他們可以輸入 MQTT 代理詳細資料和主題以建立連線。
2. **假設** 已成功連線至 MQTT 代理，**當** 使用者切換至「播放機器人動作」頁面時，**那麼** 將顯示預定義動作清單，且機器人的馬達角度會每秒發佈至 MQTT 主題。
3. **假設** 使用者位於「播放機器人動作」頁面，**當** 他們從清單中選取一個動作時，**那麼** 機器人會執行所選的動作。
4. **假設** 使用者導覽至「手動機器人調整」頁面，**當** 頁面載入時，**那麼** 機器人的馬達會自動初始化至零位置。
5. **假設** 使用者位於「手動機器人調整」頁面，**當** 按下「記錄」按鈕時，**那麼** 機器人目前的馬達角度會持續發佈至 MQTT 主題。
6. **假設** 使用者位於「手動機器人調整」頁面，**當** 按下「返回」按鈕時，**那麼** 機器人的馬達會重設至零位置。

### 邊界案例
- 當 MQTT 連線中斷時會發生什麼事？
- 系統如何處理無效的 MQTT 代理詳細資料？
- 如果使用者在另一個動作已在進行中時嘗試執行一個動作，會發生什麼事？
- 在馬達初始化或重設期間的錯誤如何處理並傳達給使用者？

## 需求 *(強制性)*

### 功能需求
- **FR-001**：系統必須提供一個用於功能選擇的主頁面。
- **FR-002**：系統必須包含一個連線頁面，用於設定並連線至具有使用者指定主題的 MQTT 代理。
- **FR-003**：在應用程式的不同功能之間導覽時，MQTT 連線必須保持活動且持續。
- **FR-004**：系統必須提供一個「播放機器人動作」頁面，顯示官方預定義的機器人動作清單。
- **FR-005**：在「播放機器人動作」頁面，系統必須以 每秒一次 的頻率將機器人目前的馬達角度發佈至設定的 MQTT 主題。
- **FR-006**：系統必須提供一個「手動機器人調整」頁面。
- **FR-007**：進入「手動機器人調整」頁面後，系統必須自動將所有機器人馬達角度初始化為零。
- **FR-008**： 「手動機器人調整」頁面必須顯示機器人目前的馬達角度，顯示更新頻率為 每秒一次。
- **FR-009**：「手動機器人調整」頁面必須有一個「記錄」按鈕，用於啟動將機器人的馬達角度發佈至 MQTT 主題。
- **FR-010**：「手動機器人調整」頁面必須包含一個「返回」按鈕，用於將所有機器人馬達角度重設為零。
- **FR-011**：應用程式的專案檔案必須位於 `@robot` 目錄中。
- **FR-012**：該應用程式必須作為基於 Android 的解決方案進行開發。

### 關鍵實體 *(如果功能涉及資料，則包含)*
- **機器人**：代表實體機器人，包括其馬達和目前狀態。
- **MQTT 代理**：用於應用程式和機器人之間通訊的中央訊息伺服器。
- **機器人動作**：機器人可以執行的預編程動作序列。
- **馬達角度**：機器人上每個獨立馬達的旋轉位置。

---

## 審查與驗收清單
*閘道：在 main() 執行期間執行的自動化檢查*

### 內容品質
- [ ] 沒有實作細節 (語言、框架、API)
- [ ] 專注於使用者價值和業務需求
- [ ] 為非技術利害關係人編寫
- [ ] 所有強制性章節均已完成

### 需求完整性
- [ ] 沒有 [需要澄清] 標記
- [ ] 需求是可測試且無歧義的
- [ ] 成功標準是可衡量的
- [ ] 範圍已明確界定
- [ ] 已識別相依性和假設

---

## 執行狀態
*由 main() 在處理期間更新*

- [ ] 已解析使用者描述
- [ ] 已提取關鍵概念
- [ ] 已標記模糊之處
- [ ] 已定義使用者場景
- [ ] 已產生需求
- [ ] 已識別實體
- [ ] 已通過審查清單

---