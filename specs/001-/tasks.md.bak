# Tasks for Speech Coaching System

## Phase 1: Backend Infrastructure

### T001: [P] Initialize FastAPI Project
- **File**: `backend/main.py`
- **Description**: Create a new FastAPI application. Include basic "hello world" endpoint for testing setup.

### T002: [P] Setup Backend Dependencies
- **File**: `backend/pyproject.toml`
- **Description**: Add `fastapi`, `uvicorn`, `httpx`, `opencv-python`, `mediapipe`, `paho-mqtt` to the project dependencies.

### T003: [P] LLM Handler Module
- **File**: `backend/llm_handler.py`
- **Description**: Implement a function to call a Large Language Model API using `httpx`. This will be used for suggesting annotations.

### T004: [P] MQTT Client Module
- **File**: `backend/mqtt_client.py`
- **Description**: Implement a class to handle MQTT connection, publishing, and subscribing.

### T005: Pose Analyzer Module
- **File**: `backend/pose_analyzer.py`
- **Description**: Implement a function that uses `opencv-python` and `mediapipe` to analyze a video frame and extract pose data.
- **Depends on**: T002

## Phase 2: Core Functionality (Script Annotation)

### T006: Data Models
- **File**: `backend/src/models/script.py`
- **Description**: Create Pydantic models for `Script` and `Annotation` as defined in `data-model.md`.

### T007: [P] Frontend Script Upload UI
- **File**: `frontend/index.html`, `frontend/script.js`
- **Description**: Create the UI for uploading a script file. Implement the file upload logic using the Fetch API.

### T008: Backend Script Upload Endpoint
- **File**: `backend/main.py`
- **Description**: Implement the `/scripts` endpoint for uploading a script file. This endpoint will save the script and then call the LLM handler to get annotations.
- **Depends on**: T001, T003, T006

### T009: Script Annotation Service
- **File**: `backend/src/services/annotation_service.py`
- **Description**: Implement the logic to automatically annotate a script using the LLM handler.
- **Depends on**: T003

### T010: Frontend Annotation Display
- **File**: `frontend/index.html`, `frontend/script.js`
- **Description**: Display the script content and the annotations received from the backend. Allow editing and deleting annotations.
- **Depends on**: T007

### T011: Custom Action Data Model
- **File**: `backend/src/models/action.py`
- **Description**: Create Pydantic models for `CustomAction` as defined in `data-model.md`.

### T012: [P] Frontend Custom Action UI
- **File**: `frontend/index.html`, `frontend/script.js`
- **Description**: Create the UI for creating and managing custom robot actions.

### T013: Backend Custom Action Endpoints
- **File**: `backend/main.py`
- **Description**: Implement CRUD endpoints for custom actions.
- **Depends on**: T001, T011

## Phase 3: Presentation Assistance

### T014: [P] Frontend Teleprompter UI
- **File**: `frontend/index.html`, `frontend/script.js`
- **Description**: Create the teleprompter UI that displays the script text.

### T015: Frontend Speech Recognition
- **File**: `frontend/script.js`
- **Description**: Use the Web Audio API to get microphone input and implement speech recognition to track the user's progress in the script.

### T016: WebSocket for Real-time Cues
- **File**: `backend/main.py`
- **Description**: Implement the WebSocket endpoint `/ws/speech-to-text/{scriptId}` to send real-time cues to the frontend.
- **Depends on**: T001

### T017: Frontend WebSocket Client
- **File**: `frontend/script.js`
- **Description**: Implement the WebSocket client to connect to the backend and receive real-time cues.
- **Depends on**: T015

## Phase 4: System Integration and Finalization

### T018: Hardware Configuration Data Model
- **File**: `backend/src/models/config.py`
- **Description**: Create Pydantic model for `HardwareConfiguration` as defined in `data-model.md`.

### T019: [P] Frontend Settings UI
- **File**: `frontend/index.html`, `frontend/script.js`
- **Description**: Create the UI for configuring hardware connection settings.

### T020: Backend Settings Endpoints
- **File**: `backend/main.py`
- **Description**: Implement CRUD endpoints for hardware configuration.
- **Depends on**: T001, T018

### T021: End-to-End Integration Testing
- **File**: `tests/test_integration.py`
- **Description**: Write integration tests that cover the full user flow, from uploading a script to receiving cues during a presentation.
- **Depends on**: All previous tasks

### T022: [P] Project Documentation
- **File**: `README.md`
- **Description**: Write comprehensive documentation for the project, including setup instructions and API reference.
